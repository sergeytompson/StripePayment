# Stripe Payment

## Описание
Это тестовое задание, представляющее из себя вэб-приложение интернет-магазина. Для оплатызаказов используется
инфраструктура [Stripe](https://stripe.com/). С [тестовым заданием](ТЗ.txt) можно ознакомиться тут. Приложение имеет следующие сущности:
### Товар (Item)
Имеет название, описание, цену и валюту цены (по умолчанию рубль).
### Заказ (Order)
Может объединять несколько товаров, а также может иметь скидку и/или налог. Заказ в рамках тестового задания существует
в единственном экземпляре и создается в контекстном процессере.
### Налог (Tax)
Имеет краткое название, индикатор включения в стоимость (по умолчанию не включается), а также размерналога в процентах.
### Скидка (Discount)
Содержит только размер скидки в процентах.

*Важно! Создание всех сущностей доступно только в административной части приложения. Кроме того, прикрепить налог или
скидку к заказу также можно только в административной части.*

## Стек
+ Python 3.10
+ Django 4.1
+ PostgreSQL 15
+ Stripe 5.2

## Карта
- 'item/<id товара>' - страница товара. Отсюда можно отправить запрос на покупку товара (кнопка 'Buy') и добавление 
товара в заказ (кнопка 'Add to order'), а также перейти на страницу заказа.
- '/buy/<id товара>' - техническая страница для получения на товар экземпляра Stripe Session, который используется для
создания платежной формы для товара.
- '/order/<1>' - страница заказа с информацией о добавленных товарах, о скидках и налогах. Отсюда можно отправить запрос 
на покупку товаров (кнопка 'Buy').
- '/add_item_to_order/<id заказа>/<id товара>' - техническая страница для добавления товара в заказ. В добавлении будет
отказано, если валюта добавляемого товара отличается от валюты уже находящихся в заказе товаров.
- 'order_buy/<1>' - техническая страница для получения экземпляра Stripe Session, который используется для создания
платежной формы для товара, на наш заказ.

## Установка
1. Скопируйте проект: `git clone https://github.com/sergeytompson/stripe_payment_test_task`
2. Перейдите в папку проекта: `cd stripe_payment_test_task`
3. Запустите проект: `docker-compose up`

## Фикстуры
Для удобства ознакомления с проектом, при его запуске БД будет автоматически заполнена данными о товарах (10 шт),
налогах (1 шт) и скидках (1 шт).
### Superuser
Для работы с административной частью проекта необходимо авторизаваться на странице '/admin/' с помощью логина
'superuser' и пароля 'superpassword'.

## Контакты
+ Telegram: @sergeytompson
+ Email: gfhfahfp@gmail.com